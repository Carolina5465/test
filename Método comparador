@When("^get @variable (\\w+) variable y lo almacena en la variable (.+)$")
public String getVariableValue(String varName, String value) {

    // 1Ô∏è‚É£ Obtener los valores *ya resueltos* a texto simple
    String nombreArchivo = "";
    Object raw = GlobalContext.get("nombreXML");
    if (raw != null) nombreArchivo = raw.toString();

    String valorBD = getScenarioContext().processString(varName);

    // 2Ô∏è‚É£ Limpiar los valores de caracteres invisibles o basura
    nombreArchivo = nombreArchivo.replaceAll("[\\r\\n\\t\"']", "").trim();
    valorBD       = valorBD.replaceAll("[\\r\\n\\t\"']", "").trim();

    // 3Ô∏è‚É£ Mostrar ambos valores para ver exactamente qu√© texto se compara
    System.out.println("üü¶ Nombre del XML desde la ruta: [" + nombreArchivo + "]");
    System.out.println("üü© Nombre del XML desde la BD:   [" + valorBD + "]");

    // 4Ô∏è‚É£ Comparar texto plano, ignorando may√∫sculas/min√∫sculas
    if (nombreArchivo.equalsIgnoreCase(valorBD)) {
        System.out.println("‚úÖ Coincidencia exacta entre la ruta y la BD.");
    } else {
        throw new AssertionError("‚ùå El texto no coincide.\nRuta: " + nombreArchivo + "\nBD:   " + valorBD);
    }

    return valorBD;
}
